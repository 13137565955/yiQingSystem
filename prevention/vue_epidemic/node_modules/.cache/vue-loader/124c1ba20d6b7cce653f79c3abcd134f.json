{"remainingRequest":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\1biyesheji\\code\\prevention\\vue_epidemic\\src\\components\\main\\leave.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\src\\components\\main\\leave.vue","mtime":1639826493810},{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626773863946},{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\babel-loader\\lib\\index.js","mtime":1639745711564},{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626773863946},{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js","mtime":1639745719456}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIFVzZXJTaXplOiAwLA0KICAgICAgY3VycmVudFBhZ2U6IDEyLA0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIHBhZ2VTaXplOiA1LA0KICAgICAgcGFnZU5vOiAxLA0KICAgICAgY3VycmVudFBhZ2UxOiAxMCwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0YXBwbGljYXRpb24odGhpcy5wYWdlTm8sIHRoaXMucGFnZVNpemUpOw0KICB9LA0KICBmaWx0ZXJzOiB7DQogICAgZGF0ZSh0aW1lKSB7DQogICAgICB2YXIgZHQgPSBuZXcgRGF0ZSh0aW1lKTsNCiAgICAgIC8vIHl5eXktbW0tZGQNCiAgICAgIHZhciB5ID0gZHQuZ2V0RnVsbFllYXIoKTsNCiAgICAgIHZhciBtID0gZHQuZ2V0TW9udGgoKSArIDE7DQogICAgICB2YXIgZCA9IGR0LmdldERhdGUoKTsNCiAgICAgIHZhciBoaCA9IGR0LmdldEhvdXJzKCk7DQogICAgICB2YXIgbW0gPSBkdC5nZXRNaW51dGVzKCk7DQogICAgICB2YXIgc3MgPSBkdC5nZXRTZWNvbmRzKCk7DQogICAgICByZXR1cm4geSArICItIiArIG0gKyAiLSIgKyBkICsgIiAgIiArIGhoICsgIjoiICsgbW0gKyAiOiIgKyBzczsNCiAgICB9LA0KICAgIHN0YXRlMShpbnQpIHsNCiAgICAgIGlmIChpbnQgPT0gMCkgew0KICAgICAgICByZXR1cm4gIuacquWuoeaJuSI7DQogICAgICB9DQogICAgICBpZiAoaW50ID09IDEpIHsNCiAgICAgICAgcmV0dXJuICLlrqHmibnkuI3pgJrov4ciOw0KICAgICAgfQ0KICAgICAgaWYgKGludCA9PSAyKSB7DQogICAgICAgIHJldHVybiAi5a6h5om56YCa6L+HIjsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyoqDQogICAgICAgICAgKiDkv67mlLnlrqHmibnnirbmgIHkuLrlkIzmhI8NCiAgICAgICAgICBsX2lkOnJvdy5sX2lkLA0KICAgICAgICAgIHVwU3RhdGU6Mg0KICAgICAgICAgICovDQogICAgdmlldyhpbmRleCwgcm93LCB1cFN0YXRlKSB7DQogICAgICB0aGlzLiRheGlvc2p3dCh7DQogICAgICAgIHVybDogIi9hZG1pbi91cExlYXZlU3RhdGUiLA0KICAgICAgICBtZXRob2Q6ICJnZXQiLA0KICAgICAgICBkYXRhOiB7DQogICAgICAgICAgbF9pZDogcm93LmxfaWQsDQogICAgICAgICAgdXBTdGF0ZSwNCiAgICAgICAgfSwNCiAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gew0KICAgICAgICAgIHRoaXMuZ2V0YXBwbGljYXRpb24odGhpcy5wYWdlTm8sIHRoaXMucGFnZVNpemUpOw0KICAgICAgICB9LA0KICAgICAgICBlcnJvcjogKCkgPT4gew0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7DQogICAgICAgIH0sDQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAgICAgIOiOt+WPluivt+WBh+WNlQ0KICAgICAgICAgICogQHBhcmFtIG5vDQogICAgICAgICAgKiBAcGFyYW0gc2l6ZQ0KICAgICAgICAgIGN1cnJQYWdlOm5vLA0KICAgICAgICAgIHBhZ2VOdW06c2l6ZQ0KICAgICAgICAgIHRoaXMucGFnZU5vPTENCiAgICAgICAgICB0aGlzLnRhYmxlRGF0YT1yZXN1bHQuZGF0YTsNCiAgICAgICAgICB0aGlzLlVzZXJTaXplID0gcmVzdWx0LnRvdGFsDQogICAgICAgICAgKi8NCiAgICBnZXRhcHBsaWNhdGlvbihubywgc2l6ZSkgew0KICAgICAgbm8gPSBOdW1iZXIobm8pIC0gMTsNCiAgICAgIHRoaXMuJGF4aW9zand0KHsNCiAgICAgICAgdXJsOiAiL2FkbWluL2dldExlYXZlIiwNCiAgICAgICAgbWV0aG9kOiAiZ2V0IiwNCiAgICAgICAgZGF0YTogew0KICAgICAgICAgIGN1cnJQYWdlOiBubywNCiAgICAgICAgICBwYWdlTnVtOiBzaXplLA0KICAgICAgICB9LA0KICAgICAgICBzdWNjZXNzOiAocmVzdWx0KSA9PiB7DQogICAgICAgICAgdGhpcy5wYWdlTm8gPSAxOw0KICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzdWx0LmRhdGE7DQogICAgICAgICAgdGhpcy5Vc2VyU2l6ZSA9IHJlc3VsdC50b3RhbDsNCiAgICAgICAgfSwNCiAgICAgICAgZXJyb3I6ICgpID0+IHsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOw0KICAgICAgICB9LA0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIC8v5YiG6aG1DQogICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHsNCiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7DQogICAgICB0aGlzLmdldGFwcGxpY2F0aW9uKHRoaXMucGFnZU5vLCB0aGlzLnBhZ2VTaXplKTsNCiAgICB9LA0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnBhZ2VObyA9IHZhbDsNCiAgICAgIHRoaXMuZ2V0YXBwbGljYXRpb24odGhpcy5wYWdlTm8sIHRoaXMucGFnZVNpemUpOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["leave.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"leave.vue","sourceRoot":"src/components/main","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>请假管理</span>\r\n          </div>\r\n          <el-table :data=\"tableData\" border style=\"width: 100%\">\r\n            <el-table-column label=\"申请时间\">\r\n              <template slot-scope=\"scope\">{{\r\n                scope.row.createtime | date\r\n              }}</template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"u_id\" label=\"申请人\">\r\n              <!--<template slot-scope=\"scope\">{{ scope.row.u_id | username}}</template>-->\r\n            </el-table-column>\r\n            <el-table-column prop=\"leavetype\" label=\"类型\"> </el-table-column>\r\n            <el-table-column prop=\"reason\" label=\"详细信息\"> </el-table-column>\r\n            <el-table-column prop=\"state\" label=\"审核结果\">\r\n              <template slot-scope=\"scope\">{{\r\n                scope.row.state | state1\r\n              }}</template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  style=\"padding: 3px 0\"\r\n                  type=\"text\"\r\n                  @click=\"view(scope.$index, scope.row, 2)\"\r\n                  >同意</el-button\r\n                >\r\n                <el-button\r\n                  style=\"padding: 3px 0\"\r\n                  type=\"text\"\r\n                  @click=\"view(scope.$index, scope.row, 1)\"\r\n                  >拒绝</el-button\r\n                >\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <div class=\"block\" style=\"text-align: center; margin-top: 20px\">\r\n            <el-pagination\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :current-page=\"currentPage\"\r\n              :page-sizes=\"[5, 10, 15, 20, 25]\"\r\n              :page-size=\"5\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :total=\"UserSize\"\r\n            >\r\n            </el-pagination>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      UserSize: 0,\r\n      currentPage: 12,\r\n      tableData: [],\r\n      pageSize: 5,\r\n      pageNo: 1,\r\n      currentPage1: 10,\r\n    };\r\n  },\r\n  created() {\r\n    this.getapplication(this.pageNo, this.pageSize);\r\n  },\r\n  filters: {\r\n    date(time) {\r\n      var dt = new Date(time);\r\n      // yyyy-mm-dd\r\n      var y = dt.getFullYear();\r\n      var m = dt.getMonth() + 1;\r\n      var d = dt.getDate();\r\n      var hh = dt.getHours();\r\n      var mm = dt.getMinutes();\r\n      var ss = dt.getSeconds();\r\n      return y + \"-\" + m + \"-\" + d + \"  \" + hh + \":\" + mm + \":\" + ss;\r\n    },\r\n    state1(int) {\r\n      if (int == 0) {\r\n        return \"未审批\";\r\n      }\r\n      if (int == 1) {\r\n        return \"审批不通过\";\r\n      }\r\n      if (int == 2) {\r\n        return \"审批通过\";\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    /**\r\n          * 修改审批状态为同意\r\n          l_id:row.l_id,\r\n          upState:2\r\n          */\r\n    view(index, row, upState) {\r\n      this.$axiosjwt({\r\n        url: \"/admin/upLeaveState\",\r\n        method: \"get\",\r\n        data: {\r\n          l_id: row.l_id,\r\n          upState,\r\n        },\r\n        success: (result) => {\r\n          this.getapplication(this.pageNo, this.pageSize);\r\n        },\r\n        error: () => {\r\n          this.$router.push(\"/\");\r\n        },\r\n      });\r\n    },\r\n    /**\r\n          获取请假单\r\n          * @param no\r\n          * @param size\r\n          currPage:no,\r\n          pageNum:size\r\n          this.pageNo=1\r\n          this.tableData=result.data;\r\n          this.UserSize = result.total\r\n          */\r\n    getapplication(no, size) {\r\n      no = Number(no) - 1;\r\n      this.$axiosjwt({\r\n        url: \"/admin/getLeave\",\r\n        method: \"get\",\r\n        data: {\r\n          currPage: no,\r\n          pageNum: size,\r\n        },\r\n        success: (result) => {\r\n          this.pageNo = 1;\r\n          this.tableData = result.data;\r\n          this.UserSize = result.total;\r\n        },\r\n        error: () => {\r\n          this.$router.push(\"/\");\r\n        },\r\n      });\r\n    },\r\n\r\n    //分页\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.getapplication(this.pageNo, this.pageSize);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNo = val;\r\n      this.getapplication(this.pageNo, this.pageSize);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n"]}]}