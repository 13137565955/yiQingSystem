{"remainingRequest":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\1biyesheji\\code\\prevention\\vue_epidemic\\src\\components\\main\\myNotice.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\src\\components\\main\\myNotice.vue","mtime":1639826503762},{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626773863946},{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\babel-loader\\lib\\index.js","mtime":1639745711564},{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626773863946},{"path":"D:\\1biyesheji\\code\\prevention\\vue_epidemic\\node_modules\\vue-loader\\lib\\index.js","mtime":1639745719456}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNob3c6IHRydWUsDQogICAgICBVc2VyU2l6ZTogMCwNCiAgICAgIGN1cnJlbnRQYWdlOiAxLA0KICAgICAgdGFibGVEYXRhOiBbXSwNCiAgICAgIHBhZ2VTaXplOiA1LA0KICAgICAgcGFnZU5vOiAxLA0KICAgIH07DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXR2YWx1ZSh0aGlzLnBhZ2VTaXplLCB0aGlzLnBhZ2VObyk7DQogIH0sDQogIGZpbHRlcnM6IHsNCiAgICBkYXRlKHRpbWUpIHsNCiAgICAgIHZhciBkdCA9IG5ldyBEYXRlKHRpbWUpOw0KICAgICAgLy8geXl5eS1tbS1kZA0KICAgICAgdmFyIHkgPSBkdC5nZXRGdWxsWWVhcigpOw0KICAgICAgdmFyIG0gPSBkdC5nZXRNb250aCgpICsgMTsNCiAgICAgIHZhciBkID0gZHQuZ2V0RGF0ZSgpOw0KICAgICAgdmFyIGhoID0gZHQuZ2V0SG91cnMoKTsNCiAgICAgIHZhciBtbSA9IGR0LmdldE1pbnV0ZXMoKTsNCiAgICAgIHZhciBzcyA9IGR0LmdldFNlY29uZHMoKTsNCiAgICAgIHJldHVybiB5ICsgIi0iICsgbSArICItIiArIGQgKyAiICAiICsgaGggKyAiOiIgKyBtbSArICI6IiArIHNzOw0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBvcGVuMih2KSB7DQogICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgbWVzc2FnZTogdiwNCiAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgfSk7DQogICAgfSwNCiAgICAvKioNCiAgICAgKiDlt7Lor7vkuI7mnKror7vovazmjaINCiAgICAgKiBAcGFyYW0gaW5kZXgNCiAgICAgKiBAcGFyYW0gcm93DQogICAgICovDQogICAgcmVhZE4oaW5kZXgsIHJvdykgew0KICAgICAgdGhpcy4kYXhpb3Nqd3Qoew0KICAgICAgICB1cmw6ICIvc3R1ZGVudHMvZ293ZWlkdSIsDQogICAgICAgIG1ldGhvZDogImdldCIsDQogICAgICAgIGRhdGE6IHsNCiAgICAgICAgICBuX2lkOiByb3cubl9pZCwNCiAgICAgICAgfSwNCiAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gew0KICAgICAgICAgIHRoaXMub3BlbjIoIuW3suS/ruaUueS4uuacquivuyIpOw0KICAgICAgICAgIHRoaXMuZ2V0dmFsdWUodGhpcy5wYWdlU2l6ZSwgdGhpcy5wYWdlTm8pOw0KICAgICAgICB9LA0KICAgICAgICBlcnJvcjogKCkgPT4gew0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7DQogICAgICAgIH0sDQogICAgICB9KTsNCiAgICB9LA0KICAgIHJlYWRZKGluZGV4LCByb3cpIHsNCiAgICAgIHRoaXMuJGF4aW9zand0KHsNCiAgICAgICAgdXJsOiAiL3N0dWRlbnRzL2dveWlkdSIsDQogICAgICAgIG1ldGhvZDogImdldCIsDQogICAgICAgIGRhdGE6IHsNCiAgICAgICAgICBuX2lkOiByb3cubl9pZCwNCiAgICAgICAgfSwNCiAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gew0KICAgICAgICAgIHRoaXMuZ2V0bmV3KCk7DQogICAgICAgICAgdGhpcy5vcGVuMigi5bey5L+u5pS55Li65bey6K+7Iik7DQogICAgICAgIH0sDQogICAgICAgIGVycm9yOiAoKSA9PiB7DQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi8iKTsNCiAgICAgICAgfSwNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICAvKioNCiAgICAgKiDmiJHnmoTpgJrnn6XliIbpobXojrflj5bmlbDmja7kuI7mlbDph48NCiAgICAgKiAqLw0KICAgIGdldHZhbHVlKHBhZ2VOdW0sIGN1cnJQYWdlKSB7DQogICAgICB0aGlzLiRheGlvc2p3dCh7DQogICAgICAgIHVybDogIi9zdHVkZW50cy9nZXROb3RpY2UiLA0KICAgICAgICBtZXRob2Q6ICJnZXQiLA0KICAgICAgICBkYXRhOiB7DQogICAgICAgICAgcGFnZU51bTogcGFnZU51bSwNCiAgICAgICAgICBjdXJyUGFnZTogY3VyclBhZ2UgLSAxLA0KICAgICAgICB9LA0KICAgICAgICBzdWNjZXNzOiAocmVzdWx0KSA9PiB7DQogICAgICAgICAgdGhpcy5Vc2VyU2l6ZSA9IHJlc3VsdC50b3RhbDsNCiAgICAgICAgICByZXN1bHQuZGF0YS5mb3JFYWNoKCh2LCBpKSA9PiB7DQogICAgICAgICAgICB2LnR5cGUxID0gIuacquivuyI7DQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXN1bHQuZGF0YTsNCiAgICAgICAgICB0aGlzLmdldG5ldygpOw0KICAgICAgICB9LA0KICAgICAgICBlcnJvcjogKCkgPT4gew0KICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7DQogICAgICAgIH0sDQogICAgICB9KTsNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOiOt+WPlueahOaIkemAmuefpeW3suivu+WIl+ihqCjkvpvlt7Lor7vmnKror7vnirbmgIHmuLLmn5MpDQogICAgICovDQogICAgZ2V0bmV3KCkgew0KICAgICAgY29uc29sZS5sb2coIui/m+WFpWdldG5ldyIpOw0KICAgICAgLy/nrYnlkIzkuo7nu5HlrpoNCiAgICAgIHRoaXMuJGF4aW9zand0KHsNCiAgICAgICAgdXJsOiAiL3N0dWRlbnRzL2dldE5vdGljZVJlYWQiLA0KICAgICAgICBtZXRob2Q6ICJnZXQiLA0KICAgICAgICBkYXRhOiB7fSwNCiAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4gew0KICAgICAgICAgIC8v5Yik5pat5piv5ZCm5bey6K+75pyq6K+7DQogICAgICAgICAgcmVzdWx0LmZvckVhY2goKGl0ZW0sIGluZGV4KSA9PiB7DQogICAgICAgICAgICBsZXQgdmFsID0gaXRlbS5uX2lkOw0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7DQogICAgICAgICAgICAgIGlmICh2YWwgPT0gdmFsdWUubl9pZCkgew0KICAgICAgICAgICAgICAgIHZhbHVlLnR5cGUxID0gIuW3suivuyI7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgfSk7DQogICAgfSwNCiAgICAvL+WIhumhtQ0KICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7DQogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOw0KICAgICAgdGhpcy5nZXR2YWx1ZSh0aGlzLnBhZ2VTaXplLCB0aGlzLnBhZ2VObyk7DQogICAgfSwNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkgew0KICAgICAgdGhpcy5wYWdlTm8gPSB2YWw7DQogICAgICB0aGlzLmdldHZhbHVlKHRoaXMucGFnZVNpemUsIHRoaXMucGFnZU5vKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["myNotice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"myNotice.vue","sourceRoot":"src/components/main","sourcesContent":["<template>\r\n  <div>\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <el-card>\r\n          <div slot=\"header\" class=\"clearfix\" style=\"text-align: center\">\r\n            <span>我的通知</span>\r\n          </div>\r\n          <el-table\r\n            :data=\"tableData\"\r\n            border\r\n            :default-sort=\"{ prop: 'date', order: 'descending' }\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <el-table-column prop=\"n_id\" sortable label=\"序列号\">\r\n            </el-table-column>\r\n            <el-table-column prop=\"title\" label=\"主题\"> </el-table-column>\r\n            <el-table-column prop=\"type1\" label=\"状态\"> </el-table-column>\r\n            <el-table-column label=\"创建时间\">\r\n              <template slot-scope=\"scope\">{{\r\n                scope.row.createtime | date\r\n              }}</template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  style=\"padding: 3px 0\"\r\n                  type=\"text\"\r\n                  @click=\"readN(scope.$index, scope.row)\"\r\n                >\r\n                  未读\r\n                </el-button>\r\n                <el-button\r\n                  style=\"padding: 3px 0\"\r\n                  type=\"text\"\r\n                  @click=\"readY(scope.$index, scope.row)\"\r\n                >\r\n                  已读\r\n                </el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <div class=\"block\" style=\"text-align: center; margin-top: 20px\">\r\n            <el-pagination\r\n              @size-change=\"handleSizeChange\"\r\n              @current-change=\"handleCurrentChange\"\r\n              :current-page=\"currentPage\"\r\n              :page-sizes=\"[5, 10, 15, 20, 25]\"\r\n              :page-size=\"5\"\r\n              layout=\"total, sizes, prev, pager, next, jumper\"\r\n              :total=\"UserSize\"\r\n            >\r\n            </el-pagination>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      show: true,\r\n      UserSize: 0,\r\n      currentPage: 1,\r\n      tableData: [],\r\n      pageSize: 5,\r\n      pageNo: 1,\r\n    };\r\n  },\r\n  created() {\r\n    this.getvalue(this.pageSize, this.pageNo);\r\n  },\r\n  filters: {\r\n    date(time) {\r\n      var dt = new Date(time);\r\n      // yyyy-mm-dd\r\n      var y = dt.getFullYear();\r\n      var m = dt.getMonth() + 1;\r\n      var d = dt.getDate();\r\n      var hh = dt.getHours();\r\n      var mm = dt.getMinutes();\r\n      var ss = dt.getSeconds();\r\n      return y + \"-\" + m + \"-\" + d + \"  \" + hh + \":\" + mm + \":\" + ss;\r\n    },\r\n  },\r\n  methods: {\r\n    open2(v) {\r\n      this.$message({\r\n        message: v,\r\n        type: \"success\",\r\n      });\r\n    },\r\n    /**\r\n     * 已读与未读转换\r\n     * @param index\r\n     * @param row\r\n     */\r\n    readN(index, row) {\r\n      this.$axiosjwt({\r\n        url: \"/students/goweidu\",\r\n        method: \"get\",\r\n        data: {\r\n          n_id: row.n_id,\r\n        },\r\n        success: (result) => {\r\n          this.open2(\"已修改为未读\");\r\n          this.getvalue(this.pageSize, this.pageNo);\r\n        },\r\n        error: () => {\r\n          this.$router.push(\"/\");\r\n        },\r\n      });\r\n    },\r\n    readY(index, row) {\r\n      this.$axiosjwt({\r\n        url: \"/students/goyidu\",\r\n        method: \"get\",\r\n        data: {\r\n          n_id: row.n_id,\r\n        },\r\n        success: (result) => {\r\n          this.getnew();\r\n          this.open2(\"已修改为已读\");\r\n        },\r\n        error: () => {\r\n          this.$router.push(\"/\");\r\n        },\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 我的通知分页获取数据与数量\r\n     * */\r\n    getvalue(pageNum, currPage) {\r\n      this.$axiosjwt({\r\n        url: \"/students/getNotice\",\r\n        method: \"get\",\r\n        data: {\r\n          pageNum: pageNum,\r\n          currPage: currPage - 1,\r\n        },\r\n        success: (result) => {\r\n          this.UserSize = result.total;\r\n          result.data.forEach((v, i) => {\r\n            v.type1 = \"未读\";\r\n          });\r\n          this.tableData = result.data;\r\n          this.getnew();\r\n        },\r\n        error: () => {\r\n          this.$router.push(\"/\");\r\n        },\r\n      });\r\n    },\r\n    /**\r\n     * 获取的我通知已读列表(供已读未读状态渲染)\r\n     */\r\n    getnew() {\r\n      console.log(\"进入getnew\");\r\n      //等同于绑定\r\n      this.$axiosjwt({\r\n        url: \"/students/getNoticeRead\",\r\n        method: \"get\",\r\n        data: {},\r\n        success: (result) => {\r\n          //判断是否已读未读\r\n          result.forEach((item, index) => {\r\n            let val = item.n_id;\r\n            this.tableData.forEach((value, index) => {\r\n              if (val == value.n_id) {\r\n                value.type1 = \"已读\";\r\n              }\r\n            });\r\n          });\r\n        },\r\n      });\r\n    },\r\n    //分页\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.getvalue(this.pageSize, this.pageNo);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNo = val;\r\n      this.getvalue(this.pageSize, this.pageNo);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n</style>\r\n"]}]}